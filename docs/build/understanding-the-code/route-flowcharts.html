<html>
<head>
	<title>Formulaic Docs - Route Flowcharts</title>
	<link href="../assets/prism.css" rel="stylesheet">
	<link href="../assets/semantic.css" rel="stylesheet">
	<style>
		li > p:last-child { margin-bottom: 1em; }
		img { width: 100%; }
		code, kbd, pre, samp { font-family: Consolas, monospace,monospace; font-size: 1em; }
		code, kbd, samp { background: rgba(0,0,0,0.1); padding: 0 2px; border-radius: 2px; border: 1px solid rgba(0,0,0,0.1); }
		pre > code { background:transparent;padding:0;border:0;border-radius:0; }
		.ui.step, .ui.steps .step,
		.ui.steps .step:first-child { padding:7px 10px 7px 14px;}
		.ui.steps .step:first-child { padding-left:5px; }
		.ui.steps .step:last-child { padding-right:5px; }
		.ui.steps .step > .icon { margin: 0 0.4rem 0 0.1rem; }
	</style>
</head>
<body style="background-color: rgb(27, 28, 29);">
	<div class="ui internally celled grid container" style="max-width: 960px !important; min-height:100%;flex-flow: row;">
			<div class="column" style="flex:0 0 237px; -webkit-flex: 0 0 237px; padding-top:1em; ">
				<div class="ui inverted vertical menu">
					<div class="ui big header item">Formulaic Docs</div>
				        
				        		<a class="item"  href="../index.html">Home</a>
				        
				        
				        
				        
				        		<a class="item"  href="../getting-started.html">Getting Started</a>
				        
				        
				        
				        
				        <div class="item">
				            Making Forms
				             <div class="menu">
				                    
				                    		<a class="item"  href="../making-forms/introduction.html">Introduction</a>
				                    
				                    
				                    
				                    
				                    		<a class="item"  href="../making-forms/parts-of-forms.html">Parts of Forms</a>
				                    
				                    
				                    
				                    
				                    		<a class="item"  href="../making-forms/outputs.html">Outputs</a>
				                    
				                    
				                    
				                    
				                    		<a class="item"  href="../making-forms/views.html">Views</a>
				                    
				                    
				                    
				            </div>
				        </div>
				        
				        
				        <div class="item">
				            Understanding the Code
				             <div class="menu">
				                    
				                    		<a class="item"  href="introduction.html">Introduction</a>
				                    
				                    
				                    
				                    
				                    		<a class="item"  href="conceptual-overview.html">Conceptual Overview</a>
				                    
				                    
				                    
				                    
				                    		<a class="active item"  href="route-flowcharts.html">Route Flowcharts</a>
				                    
				                    
				                    
				            </div>
				        </div>
				        
				        
				        		<a class="item"  href="../future-directions.html">Future Directions</a>
				        
				        
				        
				</div>
			</div>
			<div class="twelve wide column" style="flex:1; -webkit-flex: 1; padding-top:1em; background:#fff;">
					<div class="ui massive breadcrumb">
					
					
					            <a class="section" href="../understanding-the-code.html">Understanding the Code</a>
					            <i class="right chevron icon divider"></i>
					
					    <div class="active section">
					        Route Flowcharts
					    </div>
					</div>
				<div>
					<p>This page describes the basic, general steps involved in handling each route. Note that these charts will make a lot more sense after spending some time reading the rest of this documentation, as well as the code itself.</p>
<p>Note that this does not include information about all possible query string parameters.</p>
<h2 id="get-">GET <code>/</code></h2>
<div class="ui small steps">
  <div class="step">
    <i class="info icon"></i>
    <div class="content">
      <div class="title">Get info about each form</div>
      <div class="description"><code>Parser-&gt;getFormInfo</code></div>
    </div>
  </div>
  <div class="step">
    <i class="list layout icon"></i>
    <div class="content">
      <div class="title">Build a FormList</div>
      <div class="description"><code>new FormList</code></div>
    </div>
  </div>
  <div class="step">
    <i class="code outline icon"></i>
    <div class="content">
      <div class="title">Write HTML</div>
      <div class="description"><code>writeResponse</code></div>
    </div>
  </div>
</div>

<p>This route gets the main list of forms.</p>
<h2 id="get-view-">GET <code>/view</code></h2>
<div class="ui small steps">
  <div class="step">
    <i class="file text outline icon"></i>
    <div class="content">
      <div class="title">Parse config. file</div>
      <div class="description"><code>Parser-&gt;parseJade</code></div>
    </div>
  </div>
  <div class="step">
    <i class="unhide icon"></i>
    <div class="content">
      <div class="title">Get the view</div>
      <div class="description"><code>Page-&gt;getView</code></div>
    </div>
  </div>
  <div class="step">
    <i class="database icon"></i>
    <div class="content">
      <div class="title">Query Mongo</div>
      <div class="description"><code>View-&gt;query</code></div>
    </div>
  </div>
  <div class="step">
    <i class="code outline icon"></i>
    <div class="content">
      <div class="title">Write HTML</div>
      <div class="description"><code>writeResponse</code></div>
    </div>
  </div>
</div>

<p>This route displays a specific view of a specific form. The configuration file to use is specified in <code>$_GET[&#39;form&#39;]</code>; the view to display is specified in <code>$_GET[&#39;view&#39;]</code>.</p>
<h2 id="get-forms-formid-">GET <code>/forms/[:formID]</code></h2>
<div class="ui small steps">
  <div class="step">
    <i class="folder icon"></i>
    <div class="content">
      <div class="title">Check cache</div>
      <div class="description"><code>Gregwar\Cache</code></div>
    </div>
  </div>
  <div class="step">
    <i class="file text outline icon"></i>
    <div class="content">
      <div class="title">Parse config. file</div>
      <div class="description"><code>Parser-&gt;parseJade</code></div>
    </div>
  </div>
  <div class="step">
    <i class="sitemap icon"></i>
    <div class="content">
      <div class="title">Build the form</div>
      <div class="description"><code>-&gt;makeFormPart</code></div>
    </div>
  </div>
  <div class="step">
    <i class="code outline icon"></i>
    <div class="content">
      <div class="title">Write HTML</div>
      <div class="description"><code>writeResponse</code></div>
    </div>
  </div>
</div>

<p>This route displays a particular form. The configuration file to use is specified in the URL.</p>
<h2 id="post-submit-">POST <code>/submit</code></h2>
<div class="ui small steps">
  <div class="step">
    <i class="file text outline icon"></i>
    <div class="content">
      <div class="title">Parse config. file</div>
      <div class="description"><code>Parser-&gt;parseJade</code></div>
    </div>
  </div>
  <div class="step">
    <i class="flag icon"></i>
    <div class="content">
      <div class="title">Get errors/data</div>
      <div class="description"><code>-&gt;getSubmissionPart</code></div>
    </div>
  </div>
  <div class="step">
    <i class="save icon"></i>
    <div class="content">
      <div class="title">Run outputs</div>
      <div class="description"><code>-&gt;run</code></div>
    </div>
  </div>
  <div class="step">
    <i class="send icon"></i>
    <div class="content">
      <div class="title">JSON response</div>
      <div class="description"><code>ifError</code> / <code>ifOk</code></div>
    </div>
  </div>
</div>

<p>This route submits a form, returning either validation errors or a confirmation of success.</p>
<h2 id="get-details-">GET <code>/details</code></h2>
<div class="ui small steps">
  <div class="step">
    <i class="file text outline icon"></i>
    <div class="content">
      <div class="title">Parse config. file</div>
      <div class="description"><code>Parser-&gt;parseJade</code></div>
    </div>
  </div>
  <div class="step">
    <i class="unhide icon"></i>
    <div class="content">
      <div class="title">Make the view</div>
      <div class="description"><code>new DetailsView</code></div>
    </div>
  </div>
  <div class="step">
    <i class="database icon"></i>
    <div class="content">
      <div class="title">Query Mongo</div>
      <div class="description"><code>View-&gt;query</code></div>
    </div>
  </div>
  <div class="step">
    <i class="code outline icon"></i>
    <div class="content">
      <div class="title">Write HTML</div>
      <div class="description"><code>writeResponse</code></div>
    </div>
  </div>
</div>


<p>This route is used when the Details button in a table view is pressed.</p>
<h2 id="get-csv-">GET <code>/csv</code></h2>
<div class="ui small steps">
  <div class="step">
    <i class="file text outline icon"></i>
    <div class="content">
      <div class="title">Parse config. file</div>
      <div class="description"><code>Parser-&gt;parseJade</code></div>
    </div>
  </div>
  <div class="step">
    <i class="unhide icon"></i>
    <div class="content">
      <div class="title">Make the view</div>
      <div class="description"><code>new CSVView</code></div>
    </div>
  </div>
  <div class="step">
    <i class="database icon"></i>
    <div class="content">
      <div class="title">Query Mongo</div>
      <div class="description"><code>View-&gt;query</code></div>
    </div>
  </div>
  <div class="step">
    <i class="code outline icon"></i>
    <div class="content">
      <div class="title">Write HTML</div>
      <div class="description"><code>writeResponse</code></div>
    </div>
  </div>
</div>

<p>This route is used when the Download CSV button in a table view is pressed.</p>

				</div>
			</div>
	</div>
	<script src="../assets/prism.js"></script>
</body>
</html>